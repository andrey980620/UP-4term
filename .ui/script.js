var articles = [
    {
        id: '1',
        title: 'Минское «Динамо» обыграло ярославский «Локомотив»',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2001-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'
    },
    {
        id: '2',
        title: 'news2',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2002-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '3',
        title: 'news3',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2003-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '4',
        title: 'news4',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2004-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '5',
        title: 'news5',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2005-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '6',
        title: 'news6',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2006-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '7',
        title: 'news7',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2007-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '8',
        title: 'news8',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2008-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '9',
        title: 'news9',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2009-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '10',
        title: 'news10',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2010-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '11',
        title: 'news11',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2011-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '12',
        title: 'news12',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2012-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '13',
        title: 'news13',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2013-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '14',
        title: 'news14',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2014-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '15',
        title: 'news15',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2015-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '16',
        title: 'news16',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2016-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '17',
        title: 'news17',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2017-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '18',
        title: 'news18',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2018-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '19',
        title: 'news19',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2019-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    },
    {
        id: '20',
        title: 'news20',
        summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
        createdAt: new Date('2020-02-27T23:00:00'),
        author: 'Иванов Иван',
        content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.'

    }
];

function filterByParam(arts, filterConfig) {
    var result;
    if (filterConfig.filterType == "Author") {
        return arts.filter(function (article) {
            return (article.author == filterConfig.param);
        });
    }
    else return arts;

}

function sortByDate(articles) {
    var result = articles;
    result = result.sort(function (a, b) {
        if (a.createdAt - b.createdAt < 0) {
            return 1;
        } else {
            return -1;
        }
    });
    return result;
}

function getArticles(skip, top, filterConfig) {

    var result;
    result = filterByParam(articles, filterConfig);
    result = sortByDate(result);
    result.splice(0, skip);
    result.splice(top, Number.MAX_VALUE);
    return result;
}

function getArticle(id) {
    for (var i = 0; i < articles.length; i++) {
        if (articles[i].id == id)
            return articles[i];
    }
}
function validateArticle(article) {
    if (article.id == null)
        return false;
    if (article.title == null) {
        return false;
    } else if (article.title.length > 100)  return false;
    if (article.summary == null) {
        return false;
    } else if (article.summary > 200) return false;
    if (article.author == null)
        return false;
    if (article.content == null)
        return false;

    return true;
}
function addArticle(article) {
    if (validateArticle(article)) {
        articles.splice(0, 0, article);
        return true;
    } else return false;
}
function editArticle(id, article) {
    for (var i = 0; i < articles.length; i++) {
        if (articles[i].id == id) {
            var temp = articles[i];

            if (article.title != null)
                temp.title = article.title;
            if (article.summary != null)
                temp.summary = article.summary;
            if (article.createdAt != null)
                temp.createdAt = article.createdAt;
            if (article.author != null)
                temp.author = article.author;
            if (article.content != null)
                temp.content = article.content;
            if (validateArticle(temp)) {
                articles[i] = temp;
                return true;
            } else return false;
        }
    }
    return false;
}
function removeArticle(id) {
    for (var i = 0; i < articles.length; i++) {
        if (articles[i].id == id) {
            articles.splice(i, 1);
            return true;
        }
    }
    return false;
}
console.log("Remove article with id=2")
removeArticle('2');
for (var i = 0; i < articles.length; i++) {
    console.log(articles[i]);
}
console.log("Edit:");
editArticle('1', {author: "А.П. Сидоров", summary: "Спас котенка", content: "Снял котенка с дерева"});
console.log(getArticle(1));
console.log("Get Articles");
var sorted = getArticles(5, 5, {filterType: "Author", param: "Иванов Иван"});
for (var i = 0; i < sorted.length; i++) {
    console.log(sorted[i])
}
console.log("Get article with id 13");
console.log(getArticle(13));
